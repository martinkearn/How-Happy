$(document).on("change",".btn-file :file",function(){var e=$(this),t=e.get(0).files?e.get(0).files.length:1,r=e.val().replace(/\\/g,"/").replace(/.*\//,"");e.trigger("fileselect",[t,r])}),$(document).ready(function(){function e(){t();for(var e=new FormData,o=$('input[type="file"]')[0].files,s=0;s<o.length;s++)e.append("file_"+s,o[s]);var n=$("form").serializeArray();$.each(n,function(t,r){e.append(r.name,r.value)}),$.ajax({type:"POST",url:"/home/Result",contentType:!1,processData:!1,data:e,success:function(e){r(e)},error:function(){alert("There was error uploading files!")}})}function t(){function e(){$("#result").append($("<img>",{id:"photo",src:o.result})),$("#result").css("width",$("#photo").width())}$("#resultDetails").html('Working on it <i class="fa fa-circle-o-notch fa-spin"></i>'),$("#result").html(""),$("#form-file-input").hide(),$("#form-submit-button").hide(),$("#intro-text").hide(),$("#Emotion").show(),$("h1").css("font-size","5rem"),$("#home-container").css("padding-top","0px"),$("#Emotion").css("font-size","5rem");var t=document.getElementById("file"),r=t.files[0],o=new FileReader;o.onload=e,o.readAsDataURL(r)}function r(e){var t=JSON.stringify(e),r=JSON.parse(t);$("#resultDetails").html("<span>We found "+r.Faces.length+' <i class="fa '+r.FAEmotionClass+' fa-lg"></i> faces <a href="/" class="btn btn-default">Try again</a></span>'),$.each(r.Faces,function(e,t){var o=document.createElement("div");o.className="rect",o.style.height=t.faceRectangle.height+"px",o.style.width=t.faceRectangle.width+"px",o.style.left=t.faceRectangle.left+"px",o.style.top=t.faceRectangle.top+"px",o.id="rect"+e;var s=document.createElement("div");s.className="rank",s.innerHTML="#"+(e+1),o.appendChild(s),$("#result").append(o);var n="Happiness: "+Number(t.scores.happiness.toFixed(2))+"<br>Fear: "+Number(t.scores.fear.toFixed(2))+"<br>Anger: "+Number(t.scores.anger.toFixed(2))+"<br>Contempt: "+Number(t.scores.contempt.toFixed(2))+"<br>Disgust: "+Number(t.scores.disgust.toFixed(2))+"<br>Neutral: "+Number(t.scores.neutral.toFixed(2))+"<br>Sadness: "+Number(t.scores.sadness.toFixed(2))+"<br>Surprise: "+Number(t.scores.surprise.toFixed(2));$("#rect"+e).popover({title:"How is #"+(e+1)+" feeling?",content:n,html:"true",trigger:"click"}),$("body").css("background-color","#"+r.ThemeColour),$(".rect").css("border-color","#"+r.ThemeColour),$(".rank").css("color","#"+r.ThemeColour),$(".popover-title").css("background-color","#"+r.ThemeColour)})}$("#form-file-input").show(),$("#form-submit-button").show(),$("#intro-text").show(),$("#Emotion").hide(),$("#upload-button").click(function(t){e()}),$("#Emotion").change(function(t){e()}),$(".btn-file :file").on("fileselect",function(e,t,r){var o=$(this).parents(".input-group").find(":text"),s=t>1?t+" files selected":r;o.length?o.val(s):s&&alert(s)})});